


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>How to Use The ADAM Project &#8212; ADAM 1.0.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/cloud.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>

    
    
     
        <script src="_static/jquery.cookie.js"></script>
    

    
     
        <script src="_static/cloud.base.js"></script>
    

    
     
        <script src="_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Problem Definition" href="problem_definition.html" />
    <link rel="prev" title="Welcome to The ADAM Project’s documentation!" href="index.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="problem_definition.html" title="Problem Definition"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="index.html" title="Welcome to The ADAM Project’s documentation!"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">ADAM 1.0.2 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">How to Use The ADAM Project</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="how-to-use-the-adam-project">
<h1>How to Use The ADAM Project<a class="headerlink" href="#how-to-use-the-adam-project" title="Permalink to this heading">¶</a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<p>To use <strong>ADAM</strong>, you can install install it using pip:</p>
<p><code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+https://github.com/Naww137/ADAM</span></code></p>
<p>If a new version of ADAM has been released, you can update ADAM by running:</p>
<p><code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">git+https://github.com/Naww137/ADAM</span></code></p>
<p>If you would like to run in <a class="reference external" href="https://setuptools.pypa.io/en/latest/userguide/development_mode.html">development mode</a>, install using:</p>
<p><code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span></code></p>
<p>This project comes with significant documentation. In order to devlop and compile this documentation with <a class="reference external" href="https://www.sphinx-doc.org/en/master/">sphinx</a>
follow the next few steps. If you are only a user, all of the ADAM documentation is hosted on this site.</p>
<p>First make sure you have sphinx installed as well as the cloud theme</p>
<p><code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sphinx</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cloud-sptheme</span></code></p>
<p>From the directory where you cloned ADAM run:</p>
<p><code class="code docutils literal notranslate"><span class="pre">sphinx-build</span> <span class="pre">-b</span> <span class="pre">html</span> <span class="pre">docs/source/</span> <span class="pre">docs/build/html</span></code></p>
<p>To update documetation from the restructured text files without having to rebuild, navigate to the docs/ directory and run:</p>
<p><code class="code docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code></p>
<p>Any changes to the conf.py file will not take effect unless you rebuild.
The HTML files will be created in docs/build/html. The main page can be reached by openning the index.html file.
This will launch an HTML page and any of the subsequent pages can be reached from here.</p>
</section>
<section id="methodology">
<h2>Methodology<a class="headerlink" href="#methodology" title="Permalink to this heading">¶</a></h2>
<p>Write up some of the methodology here.</p>
</section>
<section id="users-guide">
<span id="usersguide"></span><h2>Users Guide<a class="headerlink" href="#users-guide" title="Permalink to this heading">¶</a></h2>
<p>This User’s Guide will give a high level overview of how ADAM runs and how to use it. The purpose of the ADAM project is to couple a Monte Carlo
neutron transport/sensitivity calculation to the <a class="reference external" href="https://arxiv.org/pdf/1412.6980.pdf/">ADAM stochastic gradient descent algorithm</a>.
The current execution of this process is done using the Department of Nuclear Engineering’s computing cluster at the University of Tennessee (UTK NE Computing cluster).
The current MC solver being used is the SCALE TSUNAMI sequence developed at <a class="reference external" href="https://www.ornl.gov/scale">Oak Ridge National Laboratory</a>.
While access to both the UTK NE cluster and SCALE are restricted, this project is structured such that these parts are interchangeable.
It is likely more intuitive to learn the stucture of this project before discussing how to run on a different machine or with a different MC solver.</p>
<p>In order to run ADAM, the user must supply 3 files in the directory where ADAM will run.</p>
<ol class="arabic">
<li><p>run_adam.py</p>
<p>This is the python script that actually executes the ADAM code.</p>
<p>First, the user will define all of the problem parameters for runtime.
This include geometry/material definitions, transformation function and objeective function derivatives, hyperparameters, and more.
These parameters are passed to the problem_definition module in ADAM, the appropiate input formats are discussed in the <cite>Problem Definition &lt;problem_definition&gt;</cite> section of this documentation.
After defining all start parameters, the run method of the <cite>ADAM Control Module &lt;ADAM_control_module&gt;</cite> is used to execute each step of the gradient descent.
This loop can be for a determined number of steps, or until some user defined stopping criteria.
What this script may look like is the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span># Import ADAM modules
from ADAM import ADAM_control_module
from ADAM import pixel
import Problem_Definition
from ADAM import cluster_interface

# TODO: Define geometry and materials
# TODO: Define initial parameters
# TODO: Define transformation and objective function derivative
# More information about the format for the above TODO&#39;s can be found in
# the Problem Definition section of this documentation or
# in the example run_adam.py script distributed with ADAM


# Define optional ADAM runtime parameters and initialize a problem definition object
options = { &#39;Write Output&#39;  :   True }
pdef = Problem_Definition.Problem_Definition(&#39;tsunami_template_11x11.inp&#39;,
                                                material_dict_base,
                                                number_of_pixels,
                                                region_definition,
                                                parameter_definition,
                                                10, 300,
                                                initial_parameter_df,

                                                transformation_function,
                                                obj_derivative,

                                                ADAM_Runtime_Parameters = options)

# Define path to runtime output file
output_filepath = os.path.join(os.getcwd(), &quot;run_adam.outfile&quot;)

# Initialize pixel array
pixel_array = []
for i in range(pdef.number_of_pixels):
   pixel_array.append(pixel.pixel(pdef.region_definition, pdef.parameter_definition, pdef.material_df_base, i+1, pdef.temperature))

# Input starting step
step = 1
if step == 1:
   with open(output_filepath, &#39;w&#39;) as f:
      f.write(&quot;Welcome to ADAM!\nYou have just started running, this file will print updates for each step\n&quot;)
else:
   with open(output_filepath, &#39;a&#39;) as f:
      f.write(f&quot;ADAM was interrupted, retarting from step {step}\n&quot;)


### Run ADAM
while step &lt; 600:

   keff = ADAM_control_module.run(step, pixel_array, pdef, output_filepath)

   step += 1
</pre></div>
</div>
<p>Within the ADAM Control Module is where one could make edits in order to change the machine that the MC solver is running on, i.e. rather than running the cluster_interface module that is specific
to the UTK NE Cluster, one could create their own module to interface with a machine of their choise.
This script is not a part of the ADAM package, however, an example is included in the cloned repository.</p>
</li>
<li><p>The template file</p>
<p>The current setup of ADAM is to optimize over a set parameters that are controlling the density of different materials in a system.
ADAM bookeeps this data in dataframes belonging to <a class="reference internal" href="source_api/pixel.html#id1"><span class="std std-ref">pixel</span></a> objects. Becuase the MC solver is supposed to be interchangeable,
with each step ADAM provides a material density and an ID, that ID corresponds to a specific numbering scheme that can be matched to the
geometry definition in a MC solver input file. For using the ADAM project with SCALE, a template file must be supplied.
The <a class="reference internal" href="source_api/scale_interface.html#id1"><span class="std std-ref">Scale Interface Module</span></a> of ADAM copies that template file and fills this the material definitions
with IDs corresponding to geometric IDs.
If you are using this package and replacing the scale interface, this file may not be necessary.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These template files are not included in the repository because SCALE is an export controlled code.</p>
</div>
</li>
<li><p>Shell script</p>
<p>The necessity of this file is an artifact of the machine ADAM interfaces with. A shell script is used to send the MC solver “job”
to a job management system that will send it to a particular computing node. This file is machine specific and therefore not included
in the distribution of ADAM.</p>
</li>
</ol>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">How to Use The ADAM Project</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#methodology">Methodology</a></li>
<li><a class="reference internal" href="#users-guide">Users Guide</a></li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="index.html"
                          title="Previous page">&larr; Welcome to The ADAM Project’s documentation!</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="problem_definition.html"
                          title="Next page">&rarr; Problem Definition</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/usage.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="problem_definition.html" title="Problem Definition"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="index.html" title="Welcome to The ADAM Project’s documentation!"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">ADAM 1.0.2 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">How to Use The ADAM Project</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Walton.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>